<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø§Ù„Ùˆ Ø°ØºØ§Ù„</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css');
        body { font-family: 'Vazirmatn', sans-serif; background: #121212; color: white; padding: 20px; line-height: 1.6; text-align: right; }
        .container { max-width: 500px; margin: 0 auto; background: #1e1e1e; padding: 20px; border-radius: 20px; border: 1px solid #e2b04a; }
        h2 { color: #e2b04a; text-align: center; font-size: 20px; }
        .section { background: #252525; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; }
        label { display: block; font-size: 12px; color: #aaa; margin-bottom: 5px; }
        input, textarea { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #444; background: #111; color: white; margin-bottom: 10px; }
        
        .upload-btn { background: #444; color: white; padding: 10px; border-radius: 8px; cursor: pointer; display: block; text-align: center; font-size: 13px; margin-bottom: 10px; border: 1px dashed #e2b04a; }
        .status { font-size: 11px; margin-top: -5px; margin-bottom: 10px; display: block; }
        
        .btn-add { background: #e2b04a; color: #000; width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-generate { background: #25D366; color: white; width: 100%; padding: 15px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; margin-top: 20px; cursor: pointer; }
        
        .item-card { background: #333; padding: 8px; border-radius: 8px; margin-top: 5px; display: flex; justify-content: space-between; align-items: center; font-size: 12px; }
        .btn-del { background: #ff4d00; border: none; color: white; padding: 4px 8px; border-radius: 5px; cursor: pointer; }
        #json-output { width: 100%; height: 150px; background: #000; color: #0f0; margin-top: 15px; display: none; font-size: 11px; padding: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ›  Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ù„Ùˆ Ø°ØºØ§Ù„</h2>

    <div class="section">
        <h3>ğŸ“± Ø¨Ø®Ø´ Ø§Ø³ØªÙˆØ±ÛŒ</h3>
        <input type="text" id="s-name" placeholder="Ù†Ø§Ù… Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±">
        <label class="upload-btn">
            <input type="file" hidden onchange="handleUpload(this, 's-img', 's-status')">
            ğŸ“¸ Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ Ø§Ø³ØªÙˆØ±ÛŒ
        </label>
        <span id="s-status" class="status">Ù‡Ù†ÙˆØ² Ø¹Ú©Ø³ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</span>
        <input type="hidden" id="s-img">
        <input type="text" id="s-link" value="https://wa.me/989220730628" placeholder="Ù„ÛŒÙ†Ú© ØªÙ…Ø§Ø³">
        <button class="btn-add" onclick="addItem('story')">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§Ø³ØªÙˆØ±ÛŒ</button>
        <div id="story-list"></div>
    </div>

    <div class="section">
        <h3>ğŸ’³ Ø¨Ø®Ø´ ØªØ¨Ù„ÛŒØºØ§Øª Ú©Ø§Ø¯Ø±ÛŒ</h3>
        <input type="text" id="a-title" placeholder="Ø¹Ù†ÙˆØ§Ù† ØªØ¨Ù„ÛŒØº">
        <textarea id="a-desc" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©ÙˆØªØ§Ù‡"></textarea>
        <label class="upload-btn">
            <input type="file" hidden onchange="handleUpload(this, 'a-img', 'a-status')">
            ğŸ“¸ Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³ ØªØ¨Ù„ÛŒØº
        </label>
        <span id="a-status" class="status">Ù‡Ù†ÙˆØ² Ø¹Ú©Ø³ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</span>
        <input type="hidden" id="a-img">
        <input type="text" id="a-phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
        <button class="btn-add" onclick="addItem('ad')">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ù„ÛŒØ³Øª ØªØ¨Ù„ÛŒØº</button>
        <div id="ad-list"></div>
    </div>

    <button class="btn-generate" onclick="generateJSON()">âœ¨ Ø³Ø§Ø®Øª Ú©Ø¯ Ù†Ù‡Ø§ÛŒÛŒ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨</button>
    <textarea id="json-output" readonly></textarea>
</div>

<script>
    let finalData = { stories: [], ads: [] };

    async function handleUpload(input, hiddenId, statusId) {
        const file = input.files[0];
        if (!file) return;

        const statusLabel = document.getElementById(statusId);
        statusLabel.innerText = "Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù¾Ù„ÙˆØ¯... Ù„Ø·ÙØ§ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ â³";
        statusLabel.style.color = "#ffae00";

        const formData = new FormData();
        formData.append("image", file);

        try {
            // Ø¢Ù¾Ù„ÙˆØ¯ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø±Ø§ÛŒÚ¯Ø§Ù†
            const response = await fetch("https://api.imgbb.com/1/upload?key=670154867499f57c9103b44869c940b5", {
                method: "POST",
                body: formData
            });
            const result = await response.json();
            
            if (result.success) {
                document.getElementById(hiddenId).value = result.data.url;
                statusLabel.innerText = "Ø¢Ù¾Ù„ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯ âœ…";
                statusLabel.style.color = "#25D366";
            } else {
                throw new Error();
            }
        } catch (e) {
            statusLabel.innerText = "Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯! Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø³Ø¹ÛŒ Ú©Ù†ÛŒØ¯ âŒ";
            statusLabel.style.color = "#ff4d00";
        }
    }

    function addItem(type) {
        if (type === 'story') {
            const name = document.getElementById('s-name').value;
            const img = document.getElementById('s-img').value;
            if (!name || !img) return alert("Ù„Ø·ÙØ§ Ù†Ø§Ù… Ùˆ Ø¹Ú©Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
            finalData.stories.push({ name, thumb: img, image: img, link: document.getElementById('s-link').value });
            render('story-list', finalData.stories, 'story');
        } else {
            const title = document.getElementById('a-title').value;
            const img = document.getElementById('a-img').value;
            if (!title || !img) return alert("Ù„Ø·ÙØ§ Ø¹Ù†ÙˆØ§Ù† Ùˆ Ø¹Ú©Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
            finalData.ads.push({ title, desc: document.getElementById('a-desc').value, image: img, phone: document.getElementById('a-phone').value });
            render('ad-list', finalData.ads, 'ad');
        }
    }

    function render(id, list, type) {
        const div = document.getElementById(id);
        div.innerHTML = '';
        list.forEach((item, i) => {
            div.innerHTML += `<div class="item-card"><span>${item.name || item.title}</span><button class="btn-del" onclick="deleteItem('${type}', ${i})">Ø­Ø°Ù</button></div>`;
        });
    }

    function deleteItem(type, i) {
        if (type === 'story') { finalData.stories.splice(i, 1); render('story-list', finalData.stories, 'story'); }
        else { finalData.ads.splice(i, 1); render('ad-list', finalData.ads, 'ad'); }
    }

    function generateJSON() {
        const out = document.getElementById('json-output');
        out.value = JSON.stringify(finalData, null, 2);
        out.style.display = 'block';
        out.select();
        alert("Ú©Ø¯ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯! Ø¢Ù† Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø± ÙØ§ÛŒÙ„ data.json Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.");
    }
</script>

</body>
</html>
